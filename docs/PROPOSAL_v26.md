# 薬剤発注ナビ 将来的な改善提案 (v26以降)

現在の v25.0 は定期発注機能を備え、運用基盤として非常に強力になりました。
さらなる使いやすさと運用安定性のために、以下の機能追加・改善を提案します。

## 1. 運用体制の強化

### 💎 マスター管理画面の実装
- **現状**: StaffやPatientデータの編集は、スプレッドシートを直接編集する必要があります。
- **課題**: 誤操作によるデータ破損のリスクや、スマホから編集しにくい問題があります。
- **提案**: アプリ内に「マスター管理」メニューを追加し、患者・スタッフ・(後述の)薬剤マスターを画面から登録・編集・削除できるようにします。

### 💊 薬剤マスターの導入とオートコンプリート
- **現状**: 薬剤名は自由入力（手入力）です。
- **課題**: 「ロキソニン」「ロキソニン錠」など表記ゆれが発生し、集計が正確に行えません。また、入力の手間がかかります。
- **提案**:
  1. 薬剤名のマスターDBを作成する。
  2. 患者名検索と同様に、薬剤名もオートコンプリート（入力候補表示）できるようにする。

## 2. ユーザビリティ向上 (UX)

### 📲 モバイル特化の操作性向上
- **現状**: PC/Mobile兼用デザインですが、スワイプ操作などは非対応です。
- **提案**:
  - リスト項目を横スワイプして「削除」や「発注済」にするアクションの実装。
  - PWA (Progressive Web App) 対応を強化し、ホーム画面からネイティブアプリのように起動できるようにする（アイコンバッジ通知など）。

### 🛡️ 入力アシストとバリデーション強化
- **現状**: 必須チェック程度はありますが、入力ミスの防止機能が弱いです。
- **提案**:
  - **重複警告**: 「同じ患者・同じ薬剤」の発注がすでに存在する場合、「未発注リストに既にあります」と警告を出す。
  - **日付チェック**: 「発注期限」が「過去の日付」になっている場合に警告する。
  - **期限の自動計算**: 「投与予定日」を入力すると、自動的に「その3日前」を発注期限として入力する等の補助機能。

### 🔔 通知設定のパーソナライズ
- **現状**: 全員に同じChat通知が飛びます。
- **提案**:
  - 「自分が担当の注文のみ通知を受け取る」設定。
  - 「緊急（明日期限）」のものだけメンション通知する設定。

## 3. 機能拡張

### 📦 在庫管理への拡張 (フェーズ2)
- **現状**: 「発注」の管理のみです。
- **提案**: 発注すると在庫が増え、使用すると在庫が減る「簡易在庫管理」機能への拡張。
  - 「在庫が少なくなったら自動で発注リストに追加」する機能など。

### 📊 データエクスポート
- **提案**: 月末の棚卸しや会計処理用に、発注履歴をCSVやPDFで出力する機能。

---

## 推奨ロードマップ案

1. **v25.x (Short Term)**:
   - **薬剤名オートコンプリート**: 最も費用対効果が高く、日々の入力が劇的に楽になります。入力済みの過去データから候補を出す簡易版ならすぐに実装可能です。

2. **v26.0 (Mid Term)**:
   - **マスター管理画面**: 運用が安定してきたタイミングで、管理者が楽になるように実装。

3. **v27.0 (Long Term)**:
   - **在庫管理連携**: 運用フローが大きく変わるため、慎重に検討。
